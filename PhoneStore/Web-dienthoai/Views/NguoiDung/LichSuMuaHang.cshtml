@using Web_dienthoai.Models;
@model IEnumerable<Itemdonhang>

@{
    ViewBag.Title = "LichSuMuaHang";
    Layout = "~/Views/Shared/_MasterLayout2.cshtml";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

<br />
<h4 class="  text-center">Lịch sử mua hàng</h4>
<h2 class=" ">@ViewBag.thongbao</h2>
<div class="thongso">
    @{ int i = 0;}
    @foreach (var item in Model)
    {
        <div class="accordion" id="accordionExample">
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading_@i">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_@i" aria-expanded="true" aria-controls="collapse_@i">
                        Đơn hàng số: @item.MaDH
                    </button>
                </h2>
                <div id="collapse_@i" class="accordion-collapse collapse show" aria-labelledby="heading_@i" data-bs-parent="#accordionExample">
                    <div class="accordion-body">

                        <hr style="border: 8px solid antiquewhite; " />
                        <h6 class=" ">Đơn hàng số :@item.MaDH</h6> <br />

                        <div>
                            <div class="DonHang  " style="display: flex; flex-direction: row">
                                @*<div class="div-left" style="width:15% ;text-align:center">
                                        <img class="w-75 h-100" src="~/Images/Phones/@item.HinhSP" alt="Lỗi Hình">
                                    </div>*@
                                <div class="div-right" style="width:85%">
                                    <h5>Mã đơn hàng: @item.MaDH</h5>
                                    <p>Tên người nhận: @item.TenNguoiNhan</p>
                                    <p>Số điện thoại: @item.SDTnhan</p>
                                    <p>Hình thức thanh toán: @item.HTThanhToan</p>
                                    <p>Hình thức giao hàng: @item.HTGiaoHang</p>
                                    <p>Ngày đặt hàng: @item.NgayDH</p>
                                    <p>Địa chỉ: @item.DiaChiNhan</p>
                                    @*<p>@item.tengiamgia</p>*@

                                </div>

                            </div>
                            <hr style=" " />
                            <div>
                                <a href=" @Url.Action("ChiTietDonHang", "NguoiDung", new { id = item.MaDH }) ">Xem Thêm </a>
                            </div>
                            <hr style=" " />
                            <div>
                                <p style="color:darkgray;margin:0;width:max-content">@item.TongSL sản phẩm</p>
                                <p style="color:red ;margin:0">Thành tiền: @String.Format("{0:0,0}", item.TriGia)đ </p>
                            </div>
                            <hr style=" " />
                            <div>
                                <p style="color:lightseagreen ;margin:0">Trạng Thái: @item.TinhTrang </p>
                            </div>
                            <hr style=" " />

                        </div>
                        <div style="text-align:center;padding-bottom:30px">@Html.ActionLink("Hủy", "XacNhanHuyDon", "NguoiDung", new { MaDH = item.MaDH }, new { @class = "btn btn-danger" })</div>


                    </div>
                </div>
            </div>
        </div>
        i++;
    }
</div>


<script>
    $(document).ready(function () {
        // Add minus icon for collapse element which
        // is open by default
        $(".collapse.show").each(function () {
            $(this).prev(".card-header").find(".fa")
                .addClass("fa-minus").removeClass("fa-plus");
        });
        // Toggle plus minus icon on show hide
        // of collapse element
        $(".collapse").on('show.bs.collapse', function () {
            $(this).prev(".card-header").find(".fa")
                .removeClass("fa-plus").addClass("fa-minus");
        }).on('hide.bs.collapse', function () {
            $(this).prev(".card-header").find(".fa")
                .removeClass("fa-minus").addClass("fa-plus");
        });
    });
</script>